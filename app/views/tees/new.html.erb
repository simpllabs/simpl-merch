<% provide(:title, "Customize Design") %>


<div class="new-tee-wrapper">
<div class="container new-tee">
	<div class="row">
	<%= form_tag("new/review", authenticity_token: true, id: "tee-form") do %> 
	<%= hidden_field_tag :authenticity_token, form_authenticity_token %>
	<!-- begin form -->

		<div class="col-xs-6">
			<!--
			<% if session[:gender] == "male" %>
				<h2>Rocketees Men's T-Shirt - $5</h2>
			<% else %>
				<h2>Rocketees Women's T-Shirt - $5.5</h2>
			<% end %>
			-->
			<h2>Gildan G640 Softstyle T-Shirt - $5</h2>
			
			<div class='specs'>
				<h5>SPECIFICATIONS</h5>
				<ul>
					<li>4.5 ounces, semi-fitted, <a target="_blank" href="https://www.youtube.com/watch?v=Tv22jq8ITHM" style="color: white; text-decoration: underline;">[view video demo]</a> <!--<%= session[:gender] == "male" ? "Gildan G640" : "Gildan G640L" %>--></li>
					<li>100% ring-spun combed cotton</li>
					<li>Shipping Cost: US $3, INTL $7
						<span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" data-placement="right" title="Domestic US delivery takes about 3-4 days to arrive once we ship. International shipping can take several weeks to arrive depending on the country. NOTE: Would you like cheaper international shipping? If you don't mind shipping from Shanghai using e-packet, we have a solution for you that would cost less than $10, including shipping (for 1-2 week delivery time). Contact us directly to discuss this option."></span>
					</li>
					<!--<li>One-time new design fee: $3
						<span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" data-placement="bottom" title="This fee is NOT charged if you use one of our free designs in the Design Library. If you upload your own design, this fee is charged only ONCE with your first sale of the design. This fee goes toward producing the printing pattern for our DTG machine."></span>
					</li>-->
					<li>Stripe fee: 3% + 30Â¢ of daily total
				        <span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" data-placement="right" title="For example, if you were to get 10 sales one day for the US, at the end of the day you would be charged $80 plus $2.7. Since we don't profit off the $8 per T-shirt, we need to charge for these Stripe transaction fees."></span>
					</li>
					<!--<li>Temporary Holiday Season Shipping Fee: $0.5
				        <span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" data-placement="bottom" title="Fee charged per shirt. NOTE: This extra fee is temporary! We are forced to charge it at the moment because shipping costs have increased during the holiday shopping season."></span>
					</li>-->
				</ul>

				<a href="http://rocketees.com/sizing-chart.pdf" target='to_blank' class="btn btn-primary" style="margin-bottom:10px;">View Sizing Chart</a>

				<!--<table class="table table-condensed table-bordered">
				    <tbody>
				    	<tr>
				        <td>SIZE</td>
				        <td>WIDTH</td>
				        <td>LENGTH</td>
				      	</tr>
						<tr>
							<td>S</td>
							<td><%= session[:gender] == "female" ? "16\"" : "18\""%></td>
							<td><%= session[:gender] == "female" ? "25.25\"" : "28\""%></td>
						</tr>
						<tr>
							<td>M</td>
							<td><%= session[:gender] == "female" ? "17\"" : "20\""%></td>
							<td><%= session[:gender] == "female" ? "26.25\"" : "29.25\""%></td>
						</tr>
						<tr>
							<td>L</td>
							<td><%= session[:gender] == "female" ? "18.5\"" : "22\""%></td>
							<td><%= session[:gender] == "female" ? "27.25\"" : "30.25\""%></td>
						</tr>
						<tr>
							<td>XL</td>
							<td><%= session[:gender] == "female" ? "19.5\"" : "24\""%></td>
							<td><%= session[:gender] == "female" ? "28\"" : "31.25\""%></td>
						</tr>
						<% #if session[:gender] == "male" %>
							<tr>
								<td>2XL</td>
								<td><%= session[:gender] == "female" ? "22\"" : "26\""%></td>
								<td><%= session[:gender] == "female" ? "28.5\"" : "32.5\""%></td>
							</tr>
							<tr>
								<td>3XL</td>
								<td><%= session[:gender] == "female" ? "23.5\"" : "28\""%></td>
								<td><%= session[:gender] == "female" ? "29\"" : "33.5\""%></td>
							</tr>
						<% #end %>
					</tbody>
				</table>-->

			</div>

			<br>
			<p>Choose your colors:</p>
			<div class="color-palettes">
				<div>
					<!-- session[:colors][:checkbox_black].present? -->
					<div class="black palette" ng-click="getBlackTee()"></div>
					<%= check_box_tag 'checkbox_black', 'Black', session[:colors].include?("Black"), class: 'color-checkbox' %>
				</div>

				<% #if session[:gender] == "male" %>
				<div>
					<!-- session[:colors][:checkbox_black].present? -->
					<div class="gray palette"></div>
					<%= check_box_tag 'checkbox_gray', 'Gray', session[:colors].include?("Gray"), class: 'color-checkbox' %>
				</div>
				<% #end %>

				<div>
					<!-- session[:colors][:checkbox_black].present? -->
					<div class="sportgray palette"></div>
					<%= check_box_tag 'checkbox_sportgray', 'SportGray', session[:colors].include?("SportGray"), class: 'color-checkbox' %>
				</div>
				<div>
					<div class="white palette" ng-click="getWhiteTee()"></div>
					<%= check_box_tag 'checkbox_white', 'White', session[:colors].include?("White"), class: 'color-checkbox' %>
				</div>
				<div>
					<div class="navy palette" value=""></div>
					<%= check_box_tag 'checkbox_navy', 'Navy', session[:colors].include?("Navy"), class: 'color-checkbox' %>
				</div>
				<div>
					<div class="royalblue palette" value=""></div>
					<%= check_box_tag 'checkbox_royalblue', 'RoyalBlue', session[:colors].include?("RoyalBlue"), class: 'color-checkbox' %>
				</div>
				<div>
					<div class="green palette"></div>
					<%= check_box_tag 'checkbox_green', 'Green', session[:colors].include?("Green"), class: 'color-checkbox' %>
				</div>
				<div>
					<div class="pink palette"></div>
					<%= check_box_tag 'checkbox_pink', 'Pink', session[:colors].include?("Pink"), class: 'color-checkbox' %>
				</div>
				<div>
					<div class="purple palette"></div>
					<%= check_box_tag 'checkbox_purple', 'Purple', session[:colors].include?("Purple"), class: 'color-checkbox' %>
				</div>
				<div>
					<div class="red palette"></div>
					<%= check_box_tag 'checkbox_red', 'Red', session[:colors].include?("Red"), class: 'color-checkbox' %>
				</div>
				<div>
					<div class="orange palette"></div>
					<%= check_box_tag 'checkbox_orange', 'Orange', session[:colors].include?("Orange"), class: 'color-checkbox' %>
				</div>
			</div>

			<p>Choose your sizes:</p>

			<div class="size-palettes">
				<!--
				<% if session[:gender] == "female" %>
					<div class='size-box'>
						<div class="palette">XS</div>
						<%= check_box_tag 'checkbox_xs', 'XS', session[:sizes].include?("XS"), class: 'size-checkbox' %>
					</div>
				<% end %>
				-->
				<div class='size-box'>
					<div class="palette">S</div>
					<%= check_box_tag 'checkbox_s', 'S', session[:sizes].include?("S"), class: 'size-checkbox' %>
				</div>
				<div class='size-box'>
					<div class="palette">M</div>
					<%= check_box_tag 'checkbox_m', 'M', session[:sizes].include?("M"), class: 'size-checkbox' %>
				</div>
				<div class='size-box'>
					<div class="palette">L</div>
					<%= check_box_tag 'checkbox_l', 'L', session[:sizes].include?("L"), class: 'size-checkbox' %>
				</div>
				<div class='size-box'>
					<div class="palette">XL</div>
					<%= check_box_tag 'checkbox_xl', 'XL', session[:sizes].include?("XL"), class: 'size-checkbox' %>
				</div>
				<% #if session[:gender] == "male" %>
					<div class='size-box'>
						<div class="palette">2XL</div>
						<%= check_box_tag 'checkbox_2xl', '2XL', session[:sizes].include?("2XL"), class: 'size-checkbox' %>
					</div>
					<div class='size-box'>
						<div class="palette">3XL</div>
						<%= check_box_tag 'checkbox_3xl', '3XL', session[:sizes].include?("3XL"), class: 'size-checkbox' %>
					</div>
				<% #end %>
			</div>

			<p>Choose genders: <span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" data-placement="right" title="An extra $0.5 is charged for each female tee. Kids tees will be available soon."></span></p>

			<div class="gender-palettes">
				<%= check_box_tag 'checkbox_male', 'Male', session[:genders].include?("Male"), class: 'gender-checkbox' %> <span id='male-checkbox-text'>Male</span> &nbsp;&nbsp;
				<%= check_box_tag 'checkbox_female', 'Female', session[:genders].include?("Female"), class: 'gender-checkbox' %> <span id='female-checkbox-text'>Female</span> &nbsp;&nbsp;
				<%= check_box_tag 'checkbox_kids', 'Kids', session[:genders].include?("Kids"), class: 'gender-checkbox', disabled: true %> <span id='kids-checkbox-text'>Kids</span>
			</div>

			<!--
			<p>IMPORTANT: Is this a multi-color design? <span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" data-placement="bottom" title="At the moment we need to charge an extra $1.5 per shirt for multi-color designs. This fee is temporary! Early next year or sooner we will remove this fee completely. (If you mistakenly choose no but the design is multi-color, we will use only the more prominent design color for the entire design)."></span></p>
			<p><%= radio_button_tag 'multicolor', 'yes', session[:multicolor] == 'yes', class: 'multicolor-radio' %> Yes ($1.5 fee, per shirt) <span style="padding-left:2em"> <%= radio_button_tag 'multicolor', 'no', session[:multicolor] == 'no', class: 'multicolor-radio' %> No </span></p>
			-->

			<% if @stripe_customer_id.present? %>
				<%= submit_tag "REVIEW AND PUBLISH DESIGN", class: 'btn btn-danger new-tee-submit' %>
			<% else %>
				<button type="submit" formaction="../account" class="btn btn-danger create-account-submit">CREATE ROCKETEES ACCOUNT</button>
				<p style="text-align: center; margin-bottom: 100px;">In order to publish designs and start <br> using the app, you need to create an account.</p>
				<%= hidden_field_tag(:no_account, value: true) %>
			<% end %>
			
			<% debug @light_or_dark %>
		</div>

		<div class="col-xs-6 tee-mockup">
	      	<div class="mockup-img-wrapper" style="position: relative;">
	      		<div id="background">
		          	<div class="resizeable-front draggable-front" style="display:inline-block; top: <%= session[:front_pos][0] %>px; left: <%= session[:front_pos][1] %>px; width: <%= session[:front_size][0] != 0 ? "#{session[:front_size][0]}px" : '30%' %>; height: <%= session[:front_size][1] != 0 ? "#{session[:front_size][1]}px" : 'auto' %>;">
		                  <div contenteditable="true" id="front-img-wrapper">
		                  	<% if session[:front_name].present? %>
		                  		<%= image_tag "#{ENV['ASSET_STORAGE_URL']}/#{session[:uuid]}_#{session[:front_name]}", class: "front-design-img" %>
			                  	<%= javascript_tag "alignFrontSessionImage()" %>
		                  	<% end %>
		                  </div>
		          	</div>

		          	<div class="resizeable-back draggable-back" style="display:none; top: <%= session[:back_pos][0] %>px; left: <%= session[:back_pos][1] %>px; width: <%= session[:back_size][0] != 0 ? "#{session[:back_size][0]}px" : '30%' %>; height: <%= session[:back_size][1] != 0 ? "#{session[:back_size][1]}px" : 'auto' %>;">
		                  <div contenteditable="true" id="back-img-wrapper">

		                  	<% if session[:back_name].present? %>
		                  		<%= image_tag "#{ENV['ASSET_STORAGE_URL']}/#{session[:uuid]}_#{session[:back_name]}", class: "back-design-img" %>
		      					<%= javascript_tag "alignBackSessionImage()" %>
		                  	<% end %>

		                  </div>
		          	</div>
		      	</div>

		      	<% if session[:free_design] && session[:dark_exists] %>
		      		<%= image_tag("design-color-flip.png", id: 'design-color-flip') %>
		      	<% end %>

		      	<!--
		      	<% if session[:gender] == "male" %>
					<%= image_tag("black-front-web.jpg", alt: "T-shirt Mockup", id: 'mockup-img') %>
				<% else %>
					<%= image_tag("f-black-front-web.jpg", alt: "T-shirt Mockup", id: 'mockup-img-f') %>
				<% end %>
				-->
				<%= image_tag("black-front-web.jpg", alt: "T-shirt Mockup", id: 'mockup-img') %>
				<%= image_tag("f-black-front-web.jpg", alt: "T-shirt Mockup", id: 'mockup-img-f') %>
			</div>
			
			<div class="flip-clear-box">
				<div class="row">
					<div class="col-sm-6">
						<button id="flip-btn" class="btn btn-primary"><span class="glyphicon glyphicon-eye-open"></span> FLIP FRONT/BACK</p>
					</div>
					<div class="col-sm-6">
						<button id="clear-btn" class="btn btn-danger"><span class="glyphicon glyphicon-remove-circle"></span> CLEAR IMAGE</p>
					</div>
				</div>
			</div>

			<div class="image-upload-box">
					<div id="front-design-input-box" class="front-design-input file-input">
						<p>Images must be PNGs, at least 2400 pixels wide, and less than 15 mb.</p>
						<%= file_field_tag 'front_design', disabled: session[:front_name].present? %>
					</div>
					<div id="back-design-input-box" class="back-design-input file-input" style="display: none;">
						<p>Images must be PNGs, at least 2400 pixels wide, and less than 15 mb.</p>
						<%= file_field_tag 'back_design', disabled: session[:back_name].present? %>
					</div>
			</div>
		</div>

	<%= hidden_field_tag :light_or_dark %>

	<%= hidden_field_tag :front_pos %>
	<%= hidden_field_tag :back_pos %>
	<%= hidden_field_tag :front_size %>
	<%= hidden_field_tag :back_size %>

	<% end %> <!-- end form -->
	</div>
	
</div>
</div>

<!-- Modals Are Below -->

<div class="modal fade" id="variants-limit-modal" role="dialog">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Rocketees</h4>
        </div>
        <div class="modal-body">
         	<p>ALERT: Variants limit exceeded. This product would have <span class="variants-calc">0</span> variants.</p> 
         	<p><b>Shopify only allows <u>100</u> variants per product definition.</b></p>
         	<p>Please unselect a few options (maybe some colors, or a gender) and try again.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

<div class="modal fade" id="missing-gender-modal" role="dialog">
<div class="modal-dialog modal-md">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 class="modal-title">Rocketees</h4>
    </div>
    <div class="modal-body">
      <p>Please select at least one gender.</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
    </div>
  </div>
</div>
</div>

<div class="modal fade" id="missing-image-modal" role="dialog">
<div class="modal-dialog modal-md">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 class="modal-title">Rocketees</h4>
    </div>
    <div class="modal-body">
      <p>Select an image file from your computer.</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
    </div>
  </div>
</div>
</div>

<div class="modal fade" id="missing-color-modal" role="dialog">
<div class="modal-dialog modal-md">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 class="modal-title">Rocketees</h4>
    </div>
    <div class="modal-body">
      <p>Select at least one color option.</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
    </div>
  </div>
</div>
</div>

<div class="modal fade" id="missing-size-modal" role="dialog">
<div class="modal-dialog modal-md">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 class="modal-title">Rocketees</h4>
    </div>
    <div class="modal-body">
      <p>Select at least one size.</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
    </div>
  </div>
</div>
</div>

<div class="modal fade" id="file-error-modal" role="dialog">
<div class="modal-dialog modal-md">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 class="modal-title">Rocketees</h4>
    </div>
    <div class="modal-body">
     
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
    </div>
  </div>
</div>
</div>

<script type="text/javascript">
	/********************/
	/* Gallery Image JS */
	/********************/

	$(function(){

	    // If design coming from library, center it
	    if (<%= @free_design %>) {
	    	var left_pos = $(".draggable-front").parent().width()/2 - $(".draggable-front").width()/2;
            $(".draggable-front").css({top: '150px', left: left_pos});
	    }

	    /*
	    if (<%= session[:gender].include?("female") %>) {
	    	$('#checkbox_xl').attr("data-toggle", "tooltip").attr("data-placement", "top").attr("title", "Currently out of stock. Will re-stock soon.").attr("style", "color: #ccc");
	    	$('#checkbox_xl').click(function(){return false});
	    } else {
	    	$('#checkbox_3xl').attr("data-toggle", "tooltip").attr("data-placement", "top").attr("title", "Currently out of stock. Will re-stock soon.").attr("style", "color: #ccc");
	    	$('#checkbox_3xl').click(function(){return false});
	    }	
	    */

	});

</script>

  